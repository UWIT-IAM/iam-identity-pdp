{% extends "base.html" %}

{% block content %}

    <div ng-app="pdpApp" class="container">

        <!-- tabs for pref name and pub pref -->
        <div role="tabpanel">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#prefname" aria-controls="prefname" role="tab"
                                                          data-toggle="tab">Preferred name</a></li>
                <li role="presentation"><a href="#pubpref" aria-controls="pubpref" role="tab" data-toggle="tab">Publish
                    pref</a></li>
            </ul>

            <div class="tab-content">

                <div role="tabpanel" class="tab-pane active" id="prefname">

                    <div class="container">
                        <!-- Begin legal name -->
                        <div class="legalname">
                            <h2>Legal Name</h2>
                            <!-- The system should grab the legal name data from the db, and in the UI it is not editable to the user -->
                            <p>{{ irws_name.formal_fname }} {{ irws_name.formal_lname }}</p>
                        </div>
                        <!-- End legal name -->
                        {% verbatim %}
                        <div ng-cloak ng-controller="NameCtrl">
                            <form role="form" name="pnform">
                                <!-- Begin preferred name -->
                                <div class="preferred-name">
                                    <h2>Preferred Name</h2>

                                    <p><i>TBD.</i> This section is for all individual UW NetID accounts to set a preferred name (PN) that is distinct from their legal name (LN. PN does not override their legal name, but it is preferentially displayed in downstream systems whenever possible. </p>
                                    <!-- Example row of columns; Begin preferred name -->

                                    <!-- Wrapper for the form; add fieldset to form fields -->
                                    <div id="form-wrapper">

                                        <!-- Counter placeholder to fieldset -->
                                        <div id="char-counter" class="alert alert-info" role="alert">
                                            <p> the char counter might live here </p>
                                        </div>

                                        <!-- Begin forms -->
                                        <div class="row">
                                            <div class="col-md-4">
                                                <h3>First Name</h3>
                                                <input type="text" name="pnfname" ng-model="pn.display_fname"
                                                       ng-pattern="valid_chars" maxtotal="80" value="{{wp.fname}}"
                                                       required="required"/>
                                                <p id="errormessage" ng-show="pnform.$dirty && pnform.pnfname.$error.required">First Name is required.</p>
                                            </div>
                                            <div class="col-md-4">
                                                <h3>Middle Name</h3>
                                                <input type="text" name="pnmname" ng-model="pn.display_mname"
                                                       ng-pattern="valid_chars" maxtotal="80" value="{{wp.mname}}"/>
                                            </div>
                                            <div class="col-md-4">
                                                <h3>Last Name</h3>
                                                <input type="text" name="pnlname" ng-model="pn.display_lname"
                                                       ng-pattern="valid_chars" maxtotal="80" value="{{wp.lname}}"
                                                       required="required"/>
                                                <p id="errormessage" ng-show="pnform.$dirty && pnform.pnlname.$error.required">Last Name is required.</p>
                                            </div>
                                        </div>
                                        <!-- End forms -->                                   
                                    </div>
                                    <!-- End wrapper -->
                                </div>
                                <!-- End preferred name -->

                                <p></p>
                                <p id="errormessage" ng-show="pnform.$dirty && pnform.$error.maxtotal">Your full display name is limited to 80 characters.</p>
                                <p id="errormessage" ng-show="pnform.$dirty && pnform.$error.pattern">Names must consist of letters, numbers, symbols or space.</p>
                                <hr>

                                <!-- Begin policy -->
                                <div class="policy">
                                    <h2>UW Preferred Name Policy</h2>

                                    <p><i>TBD.</i> Lorem ipsum dolor sit amet, consectetur
                                        adipiscing elit. Integer commodo quis lorem quis
                                        sollicitudin. Curabitur mattis eget lectus auctor
                                        auctor. Aenean consectetur quam quis dolor iaculis
                                        imperdiet. Suspendisse quis tortor id purus faucibus
                                        efficitur sed quis eros.</p>
                                        <p>This service is subject to UW <a href="http://www.washington.edu/online/terms/" target="_blank">Terms of Use</a> and <a href="http://www.washington.edu/online/privacy/" target="_blank">Privacy Policy</a>.</p>

                                </div>
                                <!-- End policy -->

                                <!-- Two actionable buttons -->
                                <div class="save-message">
                                    <p ng-show="putStatus == 'success'" class="save-success alert alert-success" role="alert">
                                        Your name has been saved successfully!
                                    </p>
                                    <p ng-show="putStatus == 'failure'" class="save-failure">
                                        Error trying to save name.
                                    </p>
                                </div>
                                <button type="submit" id="save" class="btn btn-primary" ng-click="putPrefName()"
                                        ng-disabled="pnform.$invalid"
                                        >Agree and Save
                                </button>
                            </form>


                            <footer>
                                <p></p>
                            </footer>
                        </div>

                    </div>
                </div>

                <div role="tabpanel" class="tab-pane" id="pubpref">
                    <tab heading="Pub pref" active="false" disabled="">
                        <!-- <h2><div>Publish preference</h2> -->
                        <p>You can set publishing...</p>

                        <div ng-controller="PubCtrl">
                            <form role="form">
                                <div class="form-group">
                                    <label for="wppublish">Publish in UW Directory?</label>
                                    <br/>
                                    <input type="radio" id="wppubyes" name="wppub" value="yes" ng-model="wp_publish">
                                    <label for="wppubyes">Yes</label>
                                    <br/>
                                    <input type="radio" id="wppubno" name="wppub" value="no" ng-model="wp_publish">
                                    <label for="wppubno">No</label>
                                </div>
                            </form>
                            <a class="btn btn-primary" ng-click="putPubPref()">
                                Save
                            </a>
                            <span ng-hide="putPubStatus == null">{{putPubStatus}}</span>
                        </div>
                    </tab>
                </div>
            </div>
        </div>

    </div>
    {% endverbatim %}
{% endblock %}


